// @mode: check
// @expect: success

fn main() {
    fn takes_optional_array(xs: [int; 2]?) -> int {
        let actual: [int; 2] = xs ?? [0, 0];
        actual[0]
    }

    fn takes_array_of_optional(xs: [int?; _]) -> int? {
        let _local: [int?; _] = xs;
        xs[0]
    }

    fn takes_string_optionals(xs: [string?; _]) -> string? {
        xs[1]
    }

    let _a: int = takes_optional_array([1, 2]);
    let _b: int = takes_optional_array(nil);

    let one: int? = 1;
    let mixed: [int?; _] = [nil, one];
    let _c: int? = takes_array_of_optional(mixed);
    let _d: int? = takes_array_of_optional([nil, 1]);
    let _e: int? = takes_array_of_optional([1, nil]);

    let greeting: [string?; _] = [nil, "hola", nil];
    let _f: string? = takes_string_optionals(greeting);
    let _g: string? = takes_string_optionals([nil, "hola", nil]);
}
